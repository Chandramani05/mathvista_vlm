<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <!-- Meta tags for social media banners, these should be filled in appropriatly as they are your "business card" -->
  <!-- Replace the content tag with appropriate information -->
  <meta name="description" content="DESCRIPTION META TAG">
  <meta property="og:title" content="SOCIAL MEDIA TITLE TAG"/>
  <meta property="og:description" content="SOCIAL MEDIA DESCRIPTION TAG TAG"/>
  <meta property="og:url" content="URL OF THE WEBSITE"/>
  <!-- Path to banner image, should be in the path listed below. Optimal dimenssions are 1200X630-->
  <meta property="og:image" content="static/image/your_banner_image.png" />
  <meta property="og:image:width" content="1200"/>
  <meta property="og:image:height" content="630"/>


  <meta name="twitter:title" content="TWITTER BANNER TITLE META TAG">
  <meta name="twitter:description" content="TWITTER BANNER DESCRIPTION META TAG">
  <!-- Path to banner image, should be in the path listed below. Optimal dimenssions are 1200X600-->
  <meta name="twitter:image" content="static/images/your_twitter_banner_image.png">
  <meta name="twitter:card" content="summary_large_image">
  <!-- Keywords for your paper to be indexed by-->
  <meta name="keywords" content="KEYWORDS SHOULD BE PLACED HERE">
  <meta name="viewport" content="width=device-width, initial-scale=1">


  <title>Enhancing Mathematical Reasoning in Vision-Language Models through Synthetic Multi-modal Data Generation</title>
  <link rel="icon" type="image/x-icon" href="static/images/favicon.ico">
  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro"
  rel="stylesheet">

  <link rel="stylesheet" href="static/css/bulma.min.css">
  <link rel="stylesheet" href="static/css/bulma-carousel.min.css">
  <link rel="stylesheet" href="static/css/bulma-slider.min.css">
  <link rel="stylesheet" href="static/css/fontawesome.all.min.css">
  <link rel="stylesheet"
  href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="static/css/index.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://documentcloud.adobe.com/view-sdk/main.js"></script>
  <script defer src="static/js/fontawesome.all.min.js"></script>
  <script src="static/js/bulma-carousel.min.js"></script>
  <script src="static/js/bulma-slider.min.js"></script>
  <script src="static/js/index.js"></script>

  <style>
    .carousel-heading {
        cursor: pointer;
        color: #007bff;
        font-weight: bold;
        font-size: larger;
        margin-right: 20px;
        display: inline-block;
    }
    .carousel-heading:hover {
        text-decoration: underline;
    }
    .carousel-content {
        display: none;
    }
    .carousel-content.active {
        display: block;

    }

    ul li {
        list-style-type: none; /* Remove the default bullet */
        position: relative; /* Position the bullet using pseudo-elements */
        padding-left: 20px; /* Add space for the custom bullet */
    }

    ul li::before {
        content: '•'; /* Use a bullet-like symbol */
        position: absolute;
        left: 0;
        color: red; /* Set the bullet color to red */
        font-size: 20px; /* Adjust size if necessary */
    }
    
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    $(document).ready(function() {
        $('.carousel-heading').click(function() {
            $('.carousel-content').removeClass('active');
            $($(this).data('target')).addClass('active');
        });
    });
</script>
</head>
<body>


  <section class="hero">
    <div class="hero-body">
      <div class="container is-max-desktop">
        <div class="columns is-centered">
          <div class="column has-text-centered">
            <h1 class="title is-1 publication-title">Enhancing Mathematical Reasoning in Vision-Language Models through Synthetic Multi-modal Data Generation</h1>
            <div class="is-size-5 publication-authors">
              <!-- Paper authors -->
              <span class="author-block">
                <a href="https://chandramani05.github.io/Portfolio/" target="_blank">Chandramani</a><sup>*</sup>,</span>
                  </div>

                  <div class="column has-text-centered">
                    <div class="publication-links">
                         <!-- Arxiv PDF link -->
                      <!-- <span class="link-block">
                        <a href="https://arxiv.org/pdf/<ARXIV PAPER ID>.pdf" target="_blank"
                        class="external-link button is-normal is-rounded is-dark">
                        <span class="icon">
                          <i class="fas fa-file-pdf"></i>
                        </span>
                        <span>Paper</span>
                      </a>
                    </span> -->

                    <!-- Supplementary PDF link -->
                    <!-- <span class="link-block">
                      <a href="static/pdfs/supplementary_material.pdf" target="_blank"
                      class="external-link button is-normal is-rounded is-dark">
                      <span class="icon">
                        <i class="fas fa-file-pdf"></i>
                      </span>
                      <span>Supplementary</span>
                    </a>
                  </span> -->

                  <!-- Github link -->
                  <span class="link-block">
                    <a href="https://github.com/Chandramani05/MathVista-VLM" target="_blank"
                    class="external-link button is-normal is-rounded is-dark">
                    <span class="icon">
                      <i class="fab fa-github"></i>
                    </span>
                    <span>Code</span>
                  </a>
                </span>

                <!-- ArXiv abstract Link -->
                <!-- <span class="link-block">
                  <a href="https://arxiv.org/abs/<ARXIV PAPER ID>" target="_blank"
                  class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                    <i class="ai ai-arxiv"></i>
                  </span>
                  <span>arXiv</span> -->
                </a>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>


<!-- Teaser video-->

<!-- End teaser video -->

<!-- Paper abstract -->
<section class="section hero is-light">
  <div class="container is-max-desktop">
    <div class="columns is-centered has-text-centered">
      <div >
        <h2 class="title is-3">Abstract</h2>
        <div class="content has-text-justified">
          <p>
            Vision Language Models (VLMs) have rapidly advanced in recent years, yet they still struggle with complex tasks, particularly in mathematical reasoning. In this work, we introduce a novel pipeline that leverages GPT-4 and code generation to create a specialized fine-tuning and evaluation dataset. This dataset includes 860 synthetic bar and line charts, accompanied by corresponding mathematical reasoning questions. Using GAMMAS, we fine-tune the InternLM-XComposer2-VL-1.8B model, achieving notable performance improvements: a 6.5% increase on bar chart tasks and a 12.5% increase on line chart tasks in the MathVista benchmark. Importantly, these gains are realized without compromising overall model performance, and we observe enhanced results in other task categories within MathVista as well.
        </div>
      </div>
    </div>
  </div>
</section>
<!-- End paper abstract -->

<section class="hero teaser">
  <div class="container is-max-desktop">
    <div class="hero-body">
      <img src="static/images/architecture.png" alt="Teaser Image" style="width:100%; height:auto;">
      <h2 class="subtitle has-text-centered">
        Data Generation Pipeline
      </h2>
    </div>
  </div>
</section>


<section class="section">
  <div class="container is-max-desktop">
    <div >
      <div class="container is-max-desktop">
        <h2 class="title is-3"  style="text-align: center;">Project Highlights</h2>
        <div style="text-align: center;"">
          <h3 class="carousel-heading" data-target="#section1">Contributions</h3>
          <h3 class="carousel-heading" data-target="#section2">Evaluation Criteria </h3>
          <h3 class="carousel-heading" data-target="#section3">Dataset</h3>
          <h3 class="carousel-heading" data-target="#section4">Fine-tuning</h3>
          <h3 class="carousel-heading" data-target="#section5">Experiments</h3>


        </div>
        <div id="section1" class="carousel-content active">
          <p style="text-align: left;">
            I propose a pipeline to <b>Generate Advanced Multi-modal Mathematical And Synthetic data to enhance Mathematical reasoning in VLM</b>. The key features of our approach include:
        </p>
        <ul  style="text-align: left;">
            <li>Generated a comprehensive dataset with 860 training samples and a validation set of 200 samples, focused on visual reasoning tasks using bar charts and line plots.</li>
            <li>Finetuned the InternLM-XComposer2-VL-1.8B model using our synthesized training data to enhance its reasoning capabilities.</li>
            <li>Conducted evaluations using both the MATHVISTA "testmini" dataset and our custom validation set, analyzing not only line plot and bar chart-based questions but also assessing the model's transfer learning capabilities across related categories.</li>
        </ul>
        </div>
        <div id="section2" class="carousel-content">
         <ul style="text-align: left;">
          <li>
            <b>Input : </b>  A mathematical question with a relevant image and multiple choice answers (letters and yes/no questions)
          </li>
          <li>
            <b>Output :</b> A multiple-choice answer
          </li>

          <li>
            <b>Evaluation Metric :</b> accuracy on various subsections of testmini (TestM) and our own validation set (GVal)
             <ul style="text-align: left;">
              <li>TestM-B: testmini bar chart questions</li>
              <li>TestM-L: testmini line chart questions</li>
              <li>TestM-B: testmini non-bar-and-line-chart questionss</li>
              <li>GVal-B: bar chart questions in the validation set we create</li>
              <li>GVal-L: line chart questions in the validation set we c</li>
             </ul>
          </li>
         </ul>
        </div>
        <div id="section3" class="carousel-content">
          <h2>
            <b>Generate 1060 filtered samples (860 train, 200 test)</b>
            <ul>
              <li>460 bar charts</li>
              <li>400 line charts</li>
            </ul>
          </h2>
          <figure style="margin-top:10px; text-align:center;">
            <img src="static/images/Dataset_Example.png" alt="Dataset Example" style="width:100%; max-width:600px;">
            <figcaption style="margin-top:5px; font-style:italic; color:#555;">
              Example Bar Chart Generated Using Pipelie. Associated question: According to the bar chart, what was the percentage increase in hours spent by users on Online Shopping from 2019 to 2020?
            </figcaption>
        </figure>
        </div>

        <div id="section4" class="carousel-content">
         <ul style="text-align: left;">
          <li>Used LoRA and DoRA to finetune the language model (LM) component of <b>InternLM-XComposer2-VL-1.8B</b></li>
          <li>I jointly fully fine-tune the vision encoder (ViT)</li>
          <li>I did not finetune the sampler which connects ViT and LM.</li>
          <li><ul>LoRA
            <li>
              Fixes existing weights and learns an additional low-rank update matrix
            </li>
            <li>Reduces GPU memory by only propagating gradients through matrices 
              with a rank r << the ranks of the dens weight matrix</li>
            </li>
          </ul> </li>

          <li>DoRA <ul>
            <li>Adds an extra parameter m to tune the magnitude of the weight matrices</li>
            <li>Increases memory consumption during training, but does not affect inference cost</li>
          </ul></li>

         </ul>
        </div>

        <div id="section5" class="carousel-content">
          <ul style="text-align: left;"> I tuned the following hyperparamter : 
            <li> r, the rank of the low-rank matrix in LoRA and DoRA ranging from 2 to 32</li>
            <li>Learning rate: values ranging from 2e-4 to 8e-6</li>
            <li>Adam optimizer, cosine learning rate schedule with weight decay of 0.1</li>
            <li>Categories that I train on : 
               <ul>
                <li>Whether or not we randomize options for MCQs</li>
                <li>Whether or not we use filtered data from LLM-as-a-judge</li>
                <li>Whether or not we modify the vision encoder</li>
               </ul>
            </li>
          </ul>
         </div>
      </div>
    </div>
  </div>
  
  <section class="section">
    <div class="container is-max-desktop" style="max-width: 1200px;">
      <h2 class="title is-3" style="text-align: center; margin-bottom: 20px;">Results</h2>
      <div class="columns" style="display: flex; justify-content: space-between;">
        <!-- Table 1 -->
        <div class="column" style="flex: 1; margin-right: 10px;">
          <table border="1" style="width: 100%; border-collapse: collapse;">
            <caption style="font-weight: bold; margin-bottom: 10px;">Table 1: Only Training on Synthetic Bar Charts (Score %)</caption>
            <tr>
              <th style="padding: 10px; text-align: center; font-weight: bold;">Model</th>
              <th style="padding: 10px; text-align: center; font-weight: bold;">GVal-B</th>
              <th style="padding: 10px; text-align: center; font-weight: bold;">TestM-B</th>
              <th style="padding: 10px; text-align: center; font-weight: bold;">TestM-L</th>
              <th style="padding: 10px; text-align: center; font-weight: bold;">TestM-O</th>
            </tr>
            <tr>
              <td style="padding: 10px; text-align: center; font-weight: bold;">Baseline</td>
              <td style="padding: 10px; text-align: center;">50.0</td>
              <td style="padding: 10px; text-align: center;">64.5</td>
              <td style="padding: 10px; text-align: center;">58.3</td>
              <td style="padding: 10px; text-align: center;">50.7</td>
            </tr>
            <tr>
              <td style="padding: 10px; text-align: center; font-weight: bold;">LoRA (r = 2)</td>
              <td style="padding: 10px; text-align: center;">64.1</td>
              <td style="padding: 10px; text-align: center;">-</td>
              <td style="padding: 10px; text-align: center;">-</td>
              <td style="padding: 10px; text-align: center;">-</td>
            </tr>
            <tr>
              <td style="padding: 10px; text-align: center; font-weight: bold;">LoRA (r = 8)</td>
              <td style="padding: 10px; text-align: center;">59.4</td>
              <td style="padding: 10px; text-align: center;">-</td>
              <td style="padding: 10px; text-align: center;">-</td>
              <td style="padding: 10px; text-align: center;">-</td>
            </tr>
            <tr>
              <td style="padding: 10px; text-align: center; font-weight: bold;">LoRA (r = 32)</td>
              <td style="padding: 10px; text-align: center;">67.2</td>
              <td style="padding: 10px; text-align: center;">61.3</td>
              <td style="padding: 10px; text-align: center;">58.3</td>
              <td style="padding: 10px; text-align: center;">54.4</td>
            </tr>
            <tr>
              <td style="padding: 10px; text-align: center; font-weight: bold;">Ablate ViT</td>
              <td style="padding: 10px; text-align: center;">60.9</td>
              <td style="padding: 10px; text-align: center;">61.3</td>
              <td style="padding: 10px; text-align: center;">58.3</td>
              <td style="padding: 10px; text-align: center;">55.5</td>
            </tr>
          </table>
        </div>
  
        <!-- Table 2 -->
        <div class="column" style="flex: 1; margin-right: 10px;">
          <table border="1" style="width: 100%; border-collapse: collapse;">
            <caption style="font-weight: bold; margin-bottom: 10px;">Table 2: Only Training on Synthetic Line Plots (Score %)</caption>
            <tr>
              <th style="padding: 10px; text-align: center; font-weight: bold;">Model</th>
              <th style="padding: 10px; text-align: center; font-weight: bold;">GVal-L</th>
              <th style="padding: 10px; text-align: center; font-weight: bold;">TestM-B</th>
              <th style="padding: 10px; text-align: center; font-weight: bold;">TestM-L</th>
              <th style="padding: 10px; text-align: center; font-weight: bold;">TestM-O</th>
            </tr>
            <tr>
              <td style="padding: 10px; text-align: center; font-weight: bold;">Baseline</td>
              <td style="padding: 10px; text-align: center;">49.4</td>
              <td style="padding: 10px; text-align: center;">64.5</td>
              <td style="padding: 10px; text-align: center;">58.3</td>
              <td style="padding: 10px; text-align: center;">50.7</td>
            </tr>
            <tr>
              <td style="padding: 10px; text-align: center; font-weight: bold;">LoRA (32)</td>
              <td style="padding: 10px; text-align: center;">57.1</td>
              <td style="padding: 10px; text-align: center;">64.9</td>
              <td style="padding: 10px; text-align: center;">62.5</td>
              <td style="padding: 10px; text-align: center;">53.8</td>
            </tr>
          </table>
        </div>
  
        <!-- Table 3 -->
        <div class="column" style="flex: 1;">
          <table border="1" style="width: 100%; border-collapse: collapse;">
            <caption style="font-weight: bold; margin-bottom: 10px;">Table 3: Training on Both Synthetic Bar and Line Plots (Score %)</caption>
            <tr>
              <th style="padding: 10px; text-align: center; font-weight: bold;">Model</th>
              <th style="padding: 10px; text-align: center; font-weight: bold;">GVal-B/L</th>
              <th style="padding: 10px; text-align: center; font-weight: bold;">TestM-B</th>
              <th style="padding: 10px; text-align: center; font-weight: bold;">TestM-L</th>
              <th style="padding: 10px; text-align: center; font-weight: bold;">TestM-O</th>
            </tr>
            <tr>
              <td style="padding: 10px; text-align: center; font-weight: bold;">Baseline</td>
              <td style="padding: 10px; text-align: center;">50.0/49.4</td>
              <td style="padding: 10px; text-align: center;">64.5</td>
              <td style="padding: 10px; text-align: center;">58.3</td>
              <td style="padding: 10px; text-align: center;">50.7</td>
            </tr>
            <tr>
              <td style="padding: 10px; text-align: center; font-weight: bold;">LoRA (32)</td>
              <td style="padding: 10px; text-align: center;">68.8/63.6</td>
              <td style="padding: 10px; text-align: center;">67.7</td>
              <td style="padding: 10px; text-align: center;">70.8</td>
              <td style="padding: 10px; text-align: center;">54.2</td>
            </tr>
            <tr>
              <td style="padding: 10px; text-align: center; font-weight: bold;">DoRA (32)</td>
              <td style="padding: 10px; text-align: center;">71.9/58.4</td>
              <td style="padding: 10px; text-align: center;">71.0</td>
              <td style="padding: 10px; text-align: center;">70.8</td>
              <td style="padding: 10px; text-align: center;">54.6</td>
            </tr>
          </table>
        </div>
      </div>
    </div>
  </section>


  <section class="section">
    <div class="container is-max-desktop">
      <div >
        <div class="container is-max-desktop">
          <h2 class="title is-4"  style="text-align: center;">Observations</h2>
          <p style="text-align: left;">
          These are the observations of the experiments :   
          </p>

         
        
          </div>
       </div>
       </div>
       </section>
  

 


<!-- Image carousel -->
<section class="hero is-small">
  <div class="hero-body">
    <div class="container">
      <div id="results-carousel" class="carousel results-carousel">
       <div class="item">
        <!-- Your image here -->
        <img src="static/images/carousel1.jpg" alt="MY ALT TEXT"/>
        <h2 class="subtitle has-text-centered">
          First image description.
        </h2>
      </div>
      <div class="item">
        <!-- Your image here -->
        <img src="static/images/carousel2.jpg" alt="MY ALT TEXT"/>
        <h2 class="subtitle has-text-centered">
          Second image description.
        </h2>
      </div>
      <div class="item">
        <!-- Your image here -->
        <img src="static/images/carousel3.jpg" alt="MY ALT TEXT"/>
        <h2 class="subtitle has-text-centered">
         Third image description.
       </h2>
     </div>
     <div class="item">
      <!-- Your image here -->
      <img src="static/images/carousel4.jpg" alt="MY ALT TEXT"/>
      <h2 class="subtitle has-text-centered">
        Fourth image description.
      </h2>
    </div>
  </div>
</div>
</div>
</section>
<!-- End image carousel -->




<!-- Youtube video -->
<!-- <section class="hero is-small is-light">
  <div class="hero-body">
    <div class="container">
      <h2 class="title is-3">Video Presentation</h2>
      <div class="columns is-centered has-text-centered">
        <div class="column is-four-fifths">
          
          <div class="publication-video">
            <iframe src="https://www.youtube.com/embed/JkaxUblCGz0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
          </div>
        </div>
      </div>
    </div>
  </div>
</section> -->
<!-- End youtube video -->


<!-- Video carousel -->
<!-- <section class="hero is-small">
  <div class="hero-body">
    <div class="container">
      <h2 class="title is-3">Another Carousel</h2>
      <div id="results-carousel" class="carousel results-carousel">
        <div class="item item-video1">
          <video poster="" id="video1" autoplay controls muted loop height="100%"> -->
            <!-- Your video file here
            <source src="static/videos/carousel1.mp4"
            type="video/mp4">
          </video> -->
        <!-- </div>
        <div class="item item-video2">
          <video poster="" id="video2" autoplay controls muted loop height="100%"> -->
            <!-- Your video file here -->
            <!-- <source src="static/videos/carousel2.mp4"
            type="video/mp4">
          </video>
        </div>
        <div class="item item-video3">
          <video poster="" id="video3" autoplay controls muted loop height="100%">\ -->
            <!-- Your video file here -->
            <!-- <source src="static/videos/carousel3.mp4"
            type="video/mp4">
          </video>
        </div>
      </div>
    </div>
  </div>
</section> -->
<!-- End video carousel -->






<!-- Paper poster -->
<!-- <section class="hero is-small is-light">
  <div class="hero-body">
    <div class="container">
      <h2 class="title">Poster</h2>

      <iframe  src="static/pdfs/sample.pdf" width="100%" height="550">
          </iframe>
        
      </div>
    </div>
  </section> -->
<!--End paper poster -->


<!--BibTex citation -->
  <!-- <section class="section" id="BibTeX">
    <div class="container is-max-desktop content">
      <h2 class="title">BibTeX</h2>
      <pre><code>BibTex Code Here</code></pre>
    </div>
</section> -->
<!--End BibTex citation -->


  <footer class="footer">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-8">
        <div class="content">

          <p>
            This page was built using the <a href="https://github.com/eliahuhorwitz/Academic-project-page-template" target="_blank">Academic Project Page Template</a> which was adopted from the <a href="https://nerfies.github.io" target="_blank">Nerfies</a> project page.
            You are free to borrow the of this website, we just ask that you link back to this page in the footer. <br> This website is licensed under a <a rel="license"  href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank">Creative
            Commons Attribution-ShareAlike 4.0 International License</a>.
          </p>

        </div>
      </div>
    </div>
  </div>
</footer>

<!-- Statcounter tracking code -->
  
<!-- You can add a tracker to track page visits by creating an account at statcounter.com -->

    <!-- End of Statcounter Code -->

  </body>
  </html>
